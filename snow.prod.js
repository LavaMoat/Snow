(function(){"use strict";(()=>{var e={528:(e,t,n)=>{const r=n(88),o=n(311),c=n(199);let i=!1;function a(){return i}function l(e,t,n,r,o,c,a,l,p,u,s){const f=i;let d,m;i=!0;try{d=e(t,n,r,o,c,a,l,p,u,s)}catch(c){m=c}if(f||(i=!1),m)throw m;return d}e.exports=function(e,t){return function(e,t){const n=e.document.createElement("iframe");e.document.head.appendChild(n),t(n.contentWindow),n.parentElement.removeChild(n)}(e,(n=>{l((()=>{t=t||new n.Object,r(e,n,a,t.objects||new n.Object),o(e,n,a,t.prototypes||new n.Object),c(e,n,a)}))})),l}},88:e=>{e.exports=function(e,t,n,r){for(const o in r){const c=r[o];for(let r=0;r<c.length;r++){const i=c[r];let a=t[o][i];"function"==typeof a&&(a=a.bind(e[o])),t.Object.defineProperty(e[o],i+"S",{configurable:!1,get:function(){if(n())return a}})}}}},311:e=>{function t(e,t){return function(n,r,o,c,i){if(t())return e(this,n,r,o,c,i)}}function n(e,n,r){const o=n.value,c=n.set||(()=>{}),i=n.get||(()=>o);n.configurable=!1,delete n.value,delete n.writable;const a=e.Function.prototype.call.bind(i),l=e.Function.prototype.call.bind(c);return n.get=t(a,r),n.set=t(l,r),n}function r(e,t,r,o,c,i){let a=e[c];const l=new t.Array;for(;;){const e=t.Object.getOwnPropertyDescriptor(a.prototype,i);if(t.Array.prototype.push.call(l,a.prototype),e)break;a=t.Object.getPrototypeOf(a.prototype).constructor}const p=t.Object.getOwnPropertyDescriptor(l[l.length-1],i);for(;l.length;){const e=t.Array.prototype.pop.call(l);r[e.constructor.name]&&t.Array.prototype.includes.call(r[e.constructor.name],i)||(t.Object.defineProperty(e,i+"S",n(t,p,o)),r[e.constructor.name]=r[e.constructor.name]||new t.Array,t.Array.prototype.push.call(r[e.constructor.name],i))}}e.exports=function(e,t,n,o){const c=new t.Object;for(const i in o){const a=t[i];t.Object.defineProperty(e,i+"S",{configurable:!1,get:function(){if(n())return a}}),c[i]=c[i]||new t.Array;const l=o[i];for(let o=0;o<l.length;o++){const a=l[o];r(e,t,c,n,i,a),r(e,t,c,n,i+"S",a)}}}},199:e=>{e.exports=function(e,t,n){let r=t.Object.getOwnPropertyDescriptor(e.Document.prototype,"currentScript").get.bind(e.document);t.Object.defineProperty(e.document,"currentScriptS",{configurable:!1,get:function(){if(n())return r()}})}},586:(e,t,n)=>{const r=n(228),{getFramesArray:o,getFrameTag:c}=n(648),{getOnload:i,setOnload:a,removeAttribute:l,addEventListener:p}=n(14);function u(e,t,n){if(!c(t))return;p(t,"load",(function(){r(e,[this],n)}));const o=i(t);o&&(a(t,null),l(t,"onload"),a(t,o))}e.exports=function(e,t,n){for(let r=0;r<t.length;r++){const c=t[r],i=o(c,!0);for(let t=0;t<i.length;t++)u(e,i[t],n)}}},750:e=>{e.exports=function(e){e&&e.contentWindow}},228:(e,t,n)=>{const r=n(851),o=n(750),{shadows:c,getFramesArray:i,getFrameTag:a}=n(648),{getContentWindow:l,Object:p,getFrameElement:u}=n(14);function s(e,t){let n=-1;for(;e[++n];)if(!r(e[n],e,p)&&u(e[n])===t)return e[n];for(let e=0;e<c.length;e++){const n=c[e],r=i(n,!1);for(let e=0;e<r.length;e++)if(r[e]===t)return l(r[e],a(r[e]))}return null}e.exports=function(e,t,n){for(let r=0;r<t.length;r++){const c=t[r];o(c);const i=s(e,c);i&&n(i)}}},328:(e,t,n)=>{const{getFramesArray:r}=n(648),{removeAttribute:o,getAttribute:c,getTemplateContent:i,createElement:a,getInnerHTML:l,setInnerHTML:p}=n(14),{warn:u,WARN_IFRAME_ONLOAD_ATTRIBUTE_REMOVED:s}=n(312);function f(e){for(let t=0;t<e.length;t++){const n=e[t],r=c(n,"onload");r&&(u(s,n,r),o(n,"onload"))}}e.exports=function(e,t){for(let e=0;e<t.length;e++){const n=t[e],o=a(document,"template");p(o,n);const c=r(i(o),!1);c.length&&(f(c),t[e]=l(o))}}},352:(e,t,n)=>{const r=n(228),o=n(583),c=n(459),i=n(58),{hookShadowDOM:a}=n(373),{securely:l,addEventListener:p,getFrameElement:u}=n(14),{isMarked:s,mark:f}=n(111),{error:d,ERR_MARK_NEW_WINDOW_FAILED:m}=n(312);function g(e){try{const t=!s(e);return t&&f(e),t}catch(t){d(m,e,t)}return g(e)}function y(e,t){g(t)&&function(e,t,n,r){o(e,t),c(e,t),i(e,t),a(e,t),r(e,n)}(t,(function(n){y(e,n),p(u(n),"load",(function(){r(t,[this],(function(){y(e,n)}))}))}),l,e)}let O=!1;e.exports=function(e,t){O||(O=!0,y(e,t||window))}},58:(e,t,n)=>{const{protectShadows:r}=n(373),o=n(586),{getFramesArray:c,shadows:i}=n(648),{getParentElement:a,slice:l,Object:p,Function:u}=n(14),s=n(328),f=n(228),d={DocumentFragment:["replaceChildren","append","prepend"],Document:["replaceChildren","append","prepend","write","writeln"],Node:["appendChild","insertBefore","replaceChild"],Element:["innerHTML","outerHTML","insertAdjacentHTML","replaceWith","insertAdjacentElement","append","before","prepend","after","replaceChildren"],ShadowRoot:["innerHTML"],HTMLIFrameElement:["srcdoc"]};function m(e,t,n){return function(){const p=l(arguments),d=a(this)||this;o(e,p,n),o(e,i,n),s(e,p),s(e,i);const m=u.prototype.apply.call(t,this,p),g=c(d,!1);return f(e,g,n),f(e,p,n),r(e,n,!0),m}}e.exports=function(e,t){for(const n in d){const r=d[n];for(let o=0;o<r.length;o++){const c=r[o],i=p.getOwnPropertyDescriptor(e[n].prototype,c),a=i.set?"set":"value";i[a]=m(e,i[a],t),p.defineProperty(e[n].prototype,c,i)}}}},459:(e,t,n)=>{const r=n(228),{removeEventListener:o,addEventListener:c,slice:i,Map:a,Object:l}=n(14),p=new a;function u(e,t,n){if(t)return t.handleEvent?t.handleEvent.apply(t,n):t.apply(e,n)}function s(e,t){return function(n,o,a){let l=o;return"load"===n&&(p.has(o)||p.set(o,(function(){r(e,[this],t);const n=i(arguments);u(this,o,n)})),l=p.get(o)),c(this,n,l,a)}}e.exports=function(e,t){l.defineProperty(e.EventTarget.prototype,"addEventListener",{value:s(e,t)}),l.defineProperty(e.EventTarget.prototype,"removeEventListener",{value:function(e,t,n){let r=t;return"load"===e&&(r=p.get(t),p.delete(t)),o(this,e,r,n)}})}},312:e=>{e.exports={warn:function(e,t,n){let r;switch(e){case 1:const e=t,o=n;r=!1,console.warn("SNOW:","removing html string iframe onload attribute:",e,`"${o}"`,".","\n","if this prevents your application from running correctly, please visit/report at","https://github.com/LavaMoat/snow/issues/32#issuecomment-1239273328",".");break;case 3:const c=t,i=n;r=!0,console.warn("SNOW:","blocking open API call:",c,i,".","\n","if this prevents your application from running correctly, please visit/report at","https://github.com/LavaMoat/snow/issues/2#issuecomment-1239264255",".")}return r},error:function(e,t,n){let r;if(2===e){const e=t,o=n;r=!0,console.error("SNOW:","failed to mark new window:",e,".","\n","if this prevents your application from running correctly, please visit/report at","https://github.com/LavaMoat/snow/issues/33#issuecomment-1239280063",".","\n","in order to maintain a bulletproof defense mechanism, failing to mark a new window typically causes an infinite loop",".","\n","error caught:","\n",o)}return r},WARN_IFRAME_ONLOAD_ATTRIBUTE_REMOVED:1,ERR_MARK_NEW_WINDOW_FAILED:2,WARN_OPEN_API_DISABLED:3}},111:(e,t,n)=>{const{Map:r,Object:o,Array:c}=n(14),i=(Math.random()+1).toString(36).substring(7),a=new r;e.exports={isMarked:function(e){if(!a.has(e))return!1;const t=o.getOwnPropertyDescriptor(e,"SNOW_ID");if(!t||!o.hasOwnProperty.call(t,"value"))return!1;if("function"!=typeof t.value)return!1;const n=a.get(e);return t.value(i)===n},mark:function(e){const t=new c;o.defineProperty(e,"SNOW_ID",{configurable:!1,writable:!1,value:e=>e===i&&t}),a.set(e,t)}}},14:(e,t,n)=>{const r=n(528)(window,{objects:{JSON:["parse","stringify"],document:["createElement"],Object:["defineProperty","getOwnPropertyDescriptor"]},prototypes:{Attr:["localName","name","nodeName"],String:["toLowerCase"],Function:["apply","call","bind"],Map:["get","set"],Node:["nodeType","parentElement","toString"],Document:["querySelectorAll"],DocumentFragment:["querySelectorAll","toString","replaceChildren","append","prepend"],ShadowRoot:["querySelectorAll","toString","innerHTML"],Object:["toString"],Array:["includes","push","slice"],Element:["innerHTML","toString","querySelectorAll","getAttribute","removeAttribute","tagName"],HTMLElement:["onload","toString"],HTMLScriptElement:["src"],HTMLTemplateElement:["content"],EventTarget:["addEventListener"],HTMLIFrameElement:["contentWindow"],HTMLFrameElement:["contentWindow"],HTMLObjectElement:["contentWindow"]}});function o(e,t,n){return c.slice.call(e,t,n)}const c=r((()=>({Array:ArrayS,Map:MapS,Object:ObjectS,Function:FunctionS,Node:NodeS,Element:ElementS,ShadowRoot:ShadowRootS,Document:DocumentS,DocumentFragment:DocumentFragmentS,parse:JSON.parseS,stringify:JSON.stringifyS,iframeContentWindow:Object.getOwnPropertyDescriptor(HTMLIFrameElementS.prototype,"contentWindow").get,frameContentWindow:Object.getOwnPropertyDescriptor(HTMLFrameElementS.prototype,"contentWindow").get,objectContentWindow:Object.getOwnPropertyDescriptor(HTMLObjectElementS.prototype,"contentWindow").get,createElement:Object.getOwnPropertyDescriptor(DocumentS.prototype,"createElement").value,slice:Object.getOwnPropertyDescriptor(ArrayS.prototype,"slice").value,nodeType:Object.getOwnPropertyDescriptor(NodeS.prototype,"nodeType").get,tagName:Object.getOwnPropertyDescriptor(ElementS.prototype,"tagName").get,getInnerHTML:Object.getOwnPropertyDescriptor(ElementS.prototype,"innerHTML").get,setInnerHTML:Object.getOwnPropertyDescriptor(ElementS.prototype,"innerHTML").set,toString:Object.getOwnPropertyDescriptor(ObjectS.prototype,"toString").value,getOnload:Object.getOwnPropertyDescriptor(HTMLElementS.prototype,"onload").get,setOnload:Object.getOwnPropertyDescriptor(HTMLElementS.prototype,"onload").set,getAttribute:Object.getOwnPropertyDescriptor(ElementS.prototype,"getAttribute").value,removeAttribute:Object.getOwnPropertyDescriptor(ElementS.prototype,"removeAttribute").value,addEventListener:Object.getOwnPropertyDescriptor(EventTargetS.prototype,"addEventListener").value,removeEventListener:Object.getOwnPropertyDescriptor(EventTargetS.prototype,"removeEventListener").value,getTemplateContent:Object.getOwnPropertyDescriptor(HTMLTemplateElementS.prototype,"content").get,getFrameElement:Object.getOwnPropertyDescriptor(window,"frameElement").get,getParentElement:Object.getOwnPropertyDescriptor(NodeS.prototype,"parentElement").get})));e.exports={securely:r,Object:c.Object,Function:c.Function,Node:c.Node,Element:c.Element,Document:c.Document,DocumentFragment:c.DocumentFragment,ShadowRoot:c.ShadowRoot,getParentElement:function(e){return c.getParentElement.call(e)},getTemplateContent:function(e){return c.getTemplateContent.call(e)},getFrameElement:function(e){return c.Function.prototype.call.call(c.getFrameElement,e)},getInnerHTML:function(e){return c.getInnerHTML.call(e)},setInnerHTML:function(e,t){return c.setInnerHTML.call(e,t)},getContentWindow:function(e,t){switch(t){case"IFRAME":return c.iframeContentWindow.call(e);case"FRAME":return c.frameContentWindow.call(e);case"OBJECT":return c.objectContentWindow.call(e);default:return null}},createElement:function(e,t,n){return c.createElement.call(e,t,n)},slice:o,Array:function(){return c.Array.apply(null,o(arguments))},Map:function(){return new c.Map},parse:function(e,t){return c.parse(e,t)},stringify:function(e,t,n){return c.stringify(e,t,n)},nodeType:function(e){return c.nodeType.call(e)},toString:function(e){return c.toString.call(e)},tagName:function(e){return c.tagName.call(e)},getOnload:function(e){return c.getOnload.call(e)},setOnload:function(e,t){return c.setOnload.call(e,t)},removeAttribute:function(e,t){return c.removeAttribute.call(e,t)},getAttribute:function(e,t){return c.getAttribute.call(e,t)},addEventListener:function(e,t,n,r){return c.addEventListener.call(e,t,n,r)},removeEventListener:function(e,t,n,r){return c.removeEventListener.call(e,t,n,r)}}},583:(e,t,n)=>{const{slice:r,Function:o}=n(14),{warn:c,WARN_OPEN_API_DISABLED:i}=n(312);e.exports=function(e,t){const n=e.open;e.open=function(){const a=r(arguments),l=c(i,a,e);if(l)return null;const p=o.prototype.apply.call(n,this,a);return t(p),p}}},373:(e,t,n)=>{const r=n(228),{getFramesArray:o,shadows:c}=n(648),{Object:i,Function:a}=n(14);function l(e,t,n){for(let i=0;i<c.length;i++){const a=c[i];if(n&&!a.isConnected)continue;const l=o(a,!1);r(e,l,t)}}e.exports={hookShadowDOM:function(e,t){const n=i.getOwnPropertyDescriptor(e.Element.prototype,"attachShadow"),r=n.value;n.value=function(e,t,n){return function(r){const o=a.prototype.call.call(t,this,r);return c.push(o),l(e,n,!0),o}}(e,r,t),i.defineProperty(e.Element.prototype,"attachShadow",n)},protectShadows:l}},648:(e,t,n)=>{const{tagName:r,nodeType:o,slice:c,Array:i,parse:a,stringify:l,Node:p,Document:u,DocumentFragment:s,Element:f,ShadowRoot:d}=n(14),m=new i;function g(e){return m.includes(e)}function y(e,t){let n=!1;for(let r=0;r<t.length;r++)e.includes(t[r])||(e.push(t[r]),n=!0);return n}e.exports={getFramesArray:function(e,t){const n=new i;if(null===e||"object"!=typeof e)return n;if("string"==typeof a(l(r=e,((e,t)=>e||r!==t?"":t)))||!function(e){if(g(e))return!0;const t=o(e);return t===f.prototype.ELEMENT_NODE||t===f.prototype.DOCUMENT_FRAGMENT_NODE||t===f.prototype.DOCUMENT_NODE}(e))return n;var r;const m=function(e){if(g(e))return d;switch(o(e)){case p.prototype.DOCUMENT_NODE:return u;case p.prototype.DOCUMENT_FRAGMENT_NODE:return s;default:return f}}(e).prototype.querySelectorAll,O=m.call(e,"iframe,frame,object,embed");return y(n,c(O)),t&&y(n,[e]),n},getFrameTag:function(e){if(!e||"object"!=typeof e)return null;if(o(e)!==f.prototype.ELEMENT_NODE)return null;if(g(e))return null;const t=r(e);return"IFRAME"!==t&&"FRAME"!==t&&"OBJECT"!==t&&"EMBED"!==t?null:t},shadows:m}},626:e=>{e.exports={SRC_IS_NOT_A_WINDOW:'provided argument "src" must be a proper window of instance Window',DST_IS_NOT_A_WINDOW:'provided argument "dst" must be a proper window of instance Window',SRC_IS_NOT_SAME_ORIGIN_AS_WINDOW:'provided argument "src" must be a window in the same origin as the current context window'}},851:(e,t,n)=>{const{DST_IS_NOT_A_WINDOW:r,SRC_IS_NOT_A_WINDOW:o,SRC_IS_NOT_SAME_ORIGIN_AS_WINDOW:c}=n(626);function i(e,t){const n=t(e);return n===n.window}function a(e,t,n){return null===n.getPrototypeOf.call(t,e)}e.exports=function(e,t=window,n=window.Object){if(!i(t,n))throw new Error(o);if(!i(e,n))throw new Error(r);if(a(window,t,n))throw new Error(c);return a(e,t,n)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e,t=n(352),r=n.n(t);e=window,Object.defineProperty(e,"SNOW",{value:r()})})()})();}())